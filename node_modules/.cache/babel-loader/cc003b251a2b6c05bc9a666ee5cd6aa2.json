{"ast":null,"code":"import _regeneratorRuntime from\"/home/rupam/Desktop/Faucet-React/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/rupam/Desktop/Faucet-React/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/rupam/Desktop/Faucet-React/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import\"./App.css\";import{ethers}from\"ethers\";import{PRIVATE_KEY,RPC_ENDPOINT}from\"./NetworkInfo\";import{getTimestamp,createTimestamp,updateTimestamp}from'./api';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),userAddress=_useState2[0],setUserAddress=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),faucetStatus=_useState4[0],setFaucetStatus=_useState4[1];var timeStamp=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var currentTime,currentTimestampInSeconds;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:currentTime=new Date();currentTimestampInSeconds=Math.floor(currentTime.getTime()/1000);return _context.abrupt(\"return\",currentTimestampInSeconds);case 3:case\"end\":return _context.stop();}}},_callee);}));return function timeStamp(){return _ref.apply(this,arguments);};}();var requestFunds=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var wallet,provider,timestampData,currentNonce,targetAddress,valueToSend,transaction,signedTransaction,txResponse;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;wallet=new ethers.Wallet(PRIVATE_KEY);provider=new ethers.providers.JsonRpcProvider(RPC_ENDPOINT);_context2.next=5;return getTimestamp(userAddress);case 5:timestampData=_context2.sent;if(!(timestampData!=0||timestampData+60*60*24<timeStamp())){_context2.next=9;break;}setFaucetStatus(\"You have already requested funds from the faucet.\");return _context2.abrupt(\"return\",faucetStatus);case 9:_context2.next=11;return provider.getTransactionCount(wallet.address);case 11:currentNonce=_context2.sent;targetAddress=userAddress;// Replace with the recipient's Ethereum address\nvalueToSend=ethers.utils.parseEther('0.1');// Create a transaction object\ntransaction={to:targetAddress,value:valueToSend,gasLimit:80000,nonce:currentNonce,chainId:103070};// Sign the transaction with the wallet\n_context2.next=17;return wallet.signTransaction(transaction);case 17:signedTransaction=_context2.sent;_context2.next=20;return provider.sendTransaction(signedTransaction);case 20:txResponse=_context2.sent;console.log('Transaction sent:',txResponse);_context2.next=24;return createTimestamp(userAddress);case 24:setFaucetStatus(\"Funds sent! Please wait a moment for the transaction to be confirmed.\");_context2.next=31;break;case 27:_context2.prev=27;_context2.t0=_context2[\"catch\"](0);console.error(\"Error requesting funds:\",_context2.t0.message);setFaucetStatus(\"Failed to request funds. Please try again later.\");case 31:case\"end\":return _context2.stop();}}},_callee2,null,[[0,27]]);}));return function requestFunds(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"nav\",{className:\"navbar\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"navbar-brand\",children:/*#__PURE__*/_jsx(\"h1\",{className:\"navbar-item is-size-4\",children:\"Pixel Token (PIXEL)\"})})})}),/*#__PURE__*/_jsx(\"section\",{className:\"hero is-fullheight\",children:/*#__PURE__*/_jsx(\"div\",{className:\"faucet-hero-body\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container has-text-centered main-content\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"title is-1\",children:\"Pixel Faucet\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Fast and reliable .5 PIXEL/day.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"box address-box\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"columns\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"column is-four-fifths\",children:/*#__PURE__*/_jsx(\"input\",{className:\"input is-medium\",type:\"text\",placeholder:\"Enter your wallet address (0x...)\",onChange:function onChange(e){return setUserAddress(e.target.value);}})}),/*#__PURE__*/_jsx(\"div\",{className:\"column\",children:/*#__PURE__*/_jsx(\"button\",{onClick:requestFunds,className:\"button is-link is-medium\",children:\"GET TOKENS\"})})]}),/*#__PURE__*/_jsxs(\"article\",{className:\"panel is-grey-darker\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"panel-heading\",children:\"Transaction Data\"}),/*#__PURE__*/_jsx(\"div\",{className:\"panel-block\",children:/*#__PURE__*/_jsx(\"p\",{children:faucetStatus})})]})]})]})})})]});}export default App;","map":{"version":3,"names":["React","useEffect","useState","ethers","PRIVATE_KEY","RPC_ENDPOINT","getTimestamp","createTimestamp","updateTimestamp","App","userAddress","setUserAddress","faucetStatus","setFaucetStatus","timeStamp","currentTime","Date","currentTimestampInSeconds","Math","floor","getTime","requestFunds","wallet","Wallet","provider","providers","JsonRpcProvider","timestampData","getTransactionCount","address","currentNonce","targetAddress","valueToSend","utils","parseEther","transaction","to","value","gasLimit","nonce","chainId","signTransaction","signedTransaction","sendTransaction","txResponse","console","log","error","message","e","target"],"sources":["/home/rupam/Desktop/Faucet-React/src/App.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport \"./App.css\";\nimport { ethers } from \"ethers\";\nimport { PRIVATE_KEY, RPC_ENDPOINT } from \"./NetworkInfo\";\nimport { getTimestamp, createTimestamp, updateTimestamp } from './api';\n\nfunction App() {\n\n  const [userAddress, setUserAddress] = useState(\"\");\n  const [faucetStatus, setFaucetStatus] = useState(\"\");\n\n  const timeStamp = async () => {\n    const currentTime = new Date();\n    const currentTimestampInSeconds = Math.floor(currentTime.getTime() / 1000);\n    return currentTimestampInSeconds\n  }\n\n\n  const requestFunds = async () => {\n    try {\n      const wallet = new ethers.Wallet(PRIVATE_KEY);\n      const provider = new ethers.providers.JsonRpcProvider(RPC_ENDPOINT);\n      const timestampData = await getTimestamp(userAddress);\n \n      if (timestampData != 0 || (timestampData + 60*60*24) < timeStamp() ) {\n        setFaucetStatus(\"You have already requested funds from the faucet.\");\n        return faucetStatus;\n      }\n\n          // Get the current nonce of the account\n      const currentNonce = await provider.getTransactionCount(wallet.address);\n\n      const targetAddress = userAddress; // Replace with the recipient's Ethereum address\n\n      const valueToSend = ethers.utils.parseEther('0.1');\n\n\n      // Create a transaction object\n      const transaction = {\n        to: targetAddress,\n        value: valueToSend,\n        gasLimit: 80000,\n        nonce: currentNonce,\n        chainId: 103070,\n      };\n\n      // Sign the transaction with the wallet\n      const signedTransaction = await wallet.signTransaction(transaction);\n\n\n      // Send the transaction\n      const txResponse = await provider.sendTransaction(signedTransaction);\n\n      console.log('Transaction sent:', txResponse);\n      await createTimestamp(userAddress);\n      setFaucetStatus(\"Funds sent! Please wait a moment for the transaction to be confirmed.\");\n      \n    } catch (error) {\n      console.error(\"Error requesting funds:\", error.message);\n      setFaucetStatus(\"Failed to request funds. Please try again later.\");\n    }\n  };\n\n  return (\n    <div>\n      <nav className=\"navbar\">\n        <div className=\"container\">\n          <div className=\"navbar-brand\">\n            <h1 className=\"navbar-item is-size-4\">Pixel Token (PIXEL)</h1>\n          </div>\n        </div>\n      </nav>\n      <section className=\"hero is-fullheight\">\n        <div className=\"faucet-hero-body\">\n          <div className=\"container has-text-centered main-content\">\n            <h1 className=\"title is-1\">Pixel Faucet</h1>\n            <p>Fast and reliable .5 PIXEL/day.</p>\n            <div className=\"box address-box\">\n              <div className=\"columns\">\n                <div className=\"column is-four-fifths\">\n                  <input\n                    className=\"input is-medium\"\n                    type=\"text\"\n                    placeholder=\"Enter your wallet address (0x...)\"\n                    onChange={(e) => setUserAddress(e.target.value)}\n                  />\n                </div>\n                <div className=\"column\">\n                  <button onClick={requestFunds} className=\"button is-link is-medium\">\n                    GET TOKENS\n                  </button>\n                </div>\n              </div>\n              <article className=\"panel is-grey-darker\">\n                <p className=\"panel-heading\">Transaction Data</p>\n                <div className=\"panel-block\">\n                  <p>{faucetStatus}</p>\n                </div>\n              </article>\n            </div>\n          </div>\n        </div>\n      </section>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}