{"ast":null,"code":"\"use strict\";\n/*\nThis file is part of web3.js.\n\nweb3.js is free software: you can redistribute it and/or modify\nit under the terms of the GNU Lesser General Public License as published by\nthe Free Software Foundation, either version 3 of the License, or\n(at your option) any later version.\n\nweb3.js is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU Lesser General Public License for more details.\n\nYou should have received a copy of the GNU Lesser General Public License\nalong with web3.js.  If not, see <http://www.gnu.org/licenses/>.\n*/\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.decodeMethodReturn = exports.encodeMethodABI = exports.encodeEventABI = exports.decodeEventABI = void 0;\n\nconst web3_utils_1 = require(\"web3-utils\");\n\nconst web3_types_1 = require(\"web3-types\");\n\nconst web3_eth_abi_1 = require(\"web3-eth-abi\");\n\nconst web3_eth_1 = require(\"web3-eth\");\n\nconst web3_errors_1 = require(\"web3-errors\");\n\nvar web3_eth_2 = require(\"web3-eth\");\n\nObject.defineProperty(exports, \"decodeEventABI\", {\n  enumerable: true,\n  get: function () {\n    return web3_eth_2.decodeEventABI;\n  }\n});\n\nconst encodeEventABI = (_ref, event, options) => {\n  let {\n    address\n  } = _ref;\n\n  var _a, _b;\n\n  const topics = options === null || options === void 0 ? void 0 : options.topics;\n  const filter = (_a = options === null || options === void 0 ? void 0 : options.filter) !== null && _a !== void 0 ? _a : {};\n  const opts = {};\n\n  if (!(0, web3_utils_1.isNullish)(options === null || options === void 0 ? void 0 : options.fromBlock)) {\n    opts.fromBlock = (0, web3_utils_1.format)(web3_eth_1.blockSchema.properties.number, options === null || options === void 0 ? void 0 : options.fromBlock, {\n      number: web3_types_1.FMT_NUMBER.HEX,\n      bytes: web3_types_1.FMT_BYTES.HEX\n    });\n  }\n\n  if (!(0, web3_utils_1.isNullish)(options === null || options === void 0 ? void 0 : options.toBlock)) {\n    opts.toBlock = (0, web3_utils_1.format)(web3_eth_1.blockSchema.properties.number, options === null || options === void 0 ? void 0 : options.toBlock, {\n      number: web3_types_1.FMT_NUMBER.HEX,\n      bytes: web3_types_1.FMT_BYTES.HEX\n    });\n  }\n\n  if (topics && Array.isArray(topics)) {\n    opts.topics = [...topics];\n  } else {\n    opts.topics = []; // add event signature\n\n    if (event && !event.anonymous && ![web3_eth_1.ALL_EVENTS, 'allEvents'].includes(event.name)) {\n      opts.topics.push((_b = event.signature) !== null && _b !== void 0 ? _b : (0, web3_eth_abi_1.encodeEventSignature)((0, web3_eth_abi_1.jsonInterfaceMethodToString)(event)));\n    } // add event topics (indexed arguments)\n\n\n    if (![web3_eth_1.ALL_EVENTS, 'allEvents'].includes(event.name) && event.inputs) {\n      for (const input of event.inputs) {\n        if (!input.indexed) {\n          continue;\n        }\n\n        const value = filter[input.name];\n\n        if (!value) {\n          // eslint-disable-next-line no-null/no-null\n          opts.topics.push(null);\n          continue;\n        } // TODO: https://github.com/ethereum/web3.js/issues/344\n        // TODO: deal properly with components\n\n\n        if (Array.isArray(value)) {\n          opts.topics.push(value.map(v => (0, web3_eth_abi_1.encodeParameter)(input.type, v)));\n        } else if (input.type === 'string') {\n          opts.topics.push((0, web3_utils_1.keccak256)(value));\n        } else {\n          opts.topics.push((0, web3_eth_abi_1.encodeParameter)(input.type, value));\n        }\n      }\n    }\n  }\n\n  if (!opts.topics.length) delete opts.topics;\n\n  if (address) {\n    opts.address = address.toLowerCase();\n  }\n\n  return opts;\n};\n\nexports.encodeEventABI = encodeEventABI;\n\nconst encodeMethodABI = (abi, args, deployData) => {\n  const inputLength = Array.isArray(abi.inputs) ? abi.inputs.length : 0;\n\n  if (inputLength !== args.length) {\n    throw new web3_errors_1.Web3ContractError(`The number of arguments is not matching the methods required number. You need to pass ${inputLength} arguments.`);\n  }\n\n  const params = (0, web3_eth_abi_1.encodeParameters)(Array.isArray(abi.inputs) ? abi.inputs : [], args).replace('0x', '');\n\n  if ((0, web3_eth_abi_1.isAbiConstructorFragment)(abi)) {\n    if (!deployData) throw new web3_errors_1.Web3ContractError('The contract has no contract data option set. This is necessary to append the constructor parameters.');\n\n    if (!deployData.startsWith('0x')) {\n      return `0x${deployData}${params}`;\n    }\n\n    return `${deployData}${params}`;\n  }\n\n  return `${(0, web3_eth_abi_1.encodeFunctionSignature)(abi)}${params}`;\n};\n\nexports.encodeMethodABI = encodeMethodABI;\n\nconst decodeMethodReturn = (abi, returnValues) => {\n  // If it was constructor then we need to return contract address\n  if (abi.type === 'constructor') {\n    return returnValues;\n  }\n\n  if (!returnValues) {\n    // Using \"null\" value intentionally to match legacy behavior\n    // eslint-disable-next-line no-null/no-null\n    return null;\n  }\n\n  const value = returnValues.length >= 2 ? returnValues.slice(2) : returnValues;\n\n  if (!abi.outputs) {\n    // eslint-disable-next-line no-null/no-null\n    return null;\n  }\n\n  const result = (0, web3_eth_abi_1.decodeParameters)([...abi.outputs], value);\n\n  if (result.__length__ === 1) {\n    return result[0];\n  }\n\n  return result;\n};\n\nexports.decodeMethodReturn = decodeMethodReturn;","map":{"version":3,"mappings":"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","names":["Object","enumerable","get","encodeEventABI","event","options","address","topics","filter","_a","opts","fromBlock","web3_eth_1","properties","number","web3_types_1","HEX","bytes","toBlock","Array","isArray","anonymous","includes","name","push","signature","_b","inputs","input","indexed","value","map","v","type","length","toLowerCase","exports","encodeMethodABI","abi","args","deployData","inputLength","web3_errors_1","params","replace","startsWith","decodeMethodReturn","returnValues","slice","outputs","result","__length__"],"sources":["/home/rupam/Desktop/Faucet-React/node_modules/web3-eth-contract/src/encoding.ts"],"sourcesContent":["﻿/*\nThis file is part of web3.js.\n\nweb3.js is free software: you can redistribute it and/or modify\nit under the terms of the GNU Lesser General Public License as published by\nthe Free Software Foundation, either version 3 of the License, or\n(at your option) any later version.\n\nweb3.js is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU Lesser General Public License for more details.\n\nYou should have received a copy of the GNU Lesser General Public License\nalong with web3.js.  If not, see <http://www.gnu.org/licenses/>.\n*/\n\nimport { format, isNullish, keccak256 } from 'web3-utils';\n\nimport {\n\tAbiConstructorFragment,\n\tAbiEventFragment,\n\tAbiFunctionFragment,\n\tFilter,\n\tHexString,\n\tTopic,\n\tFMT_NUMBER,\n\tFMT_BYTES,\n\tContractOptions,\n} from 'web3-types';\n\nimport {\n\tdecodeParameters,\n\tencodeEventSignature,\n\tencodeFunctionSignature,\n\tencodeParameter,\n\tencodeParameters,\n\tisAbiConstructorFragment,\n\tjsonInterfaceMethodToString,\n} from 'web3-eth-abi';\n\nimport { blockSchema, ALL_EVENTS } from 'web3-eth';\nimport { Web3ContractError } from 'web3-errors';\n\nexport { decodeEventABI } from 'web3-eth';\n\ntype Writeable<T> = { -readonly [P in keyof T]: T[P] };\nexport const encodeEventABI = (\n\t{ address }: ContractOptions,\n\tevent: AbiEventFragment & { signature: string },\n\toptions?: Filter,\n) => {\n\tconst topics = options?.topics;\n\tconst filter = options?.filter ?? {};\n\tconst opts: Writeable<Filter> = {};\n\n\tif (!isNullish(options?.fromBlock)) {\n\t\topts.fromBlock = format(blockSchema.properties.number, options?.fromBlock, {\n\t\t\tnumber: FMT_NUMBER.HEX,\n\t\t\tbytes: FMT_BYTES.HEX,\n\t\t});\n\t}\n\tif (!isNullish(options?.toBlock)) {\n\t\topts.toBlock = format(blockSchema.properties.number, options?.toBlock, {\n\t\t\tnumber: FMT_NUMBER.HEX,\n\t\t\tbytes: FMT_BYTES.HEX,\n\t\t});\n\t}\n\n\tif (topics && Array.isArray(topics)) {\n\t\topts.topics = [...topics] as Topic[];\n\t} else {\n\t\topts.topics = [];\n\t\t// add event signature\n\t\tif (event && !event.anonymous && ![ALL_EVENTS, 'allEvents'].includes(event.name)) {\n\t\t\topts.topics.push(\n\t\t\t\tevent.signature ?? encodeEventSignature(jsonInterfaceMethodToString(event)),\n\t\t\t);\n\t\t}\n\n\t\t// add event topics (indexed arguments)\n\t\tif (![ALL_EVENTS, 'allEvents'].includes(event.name) && event.inputs) {\n\t\t\tfor (const input of event.inputs) {\n\t\t\t\tif (!input.indexed) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tconst value = filter[input.name];\n\t\t\t\tif (!value) {\n\t\t\t\t\t// eslint-disable-next-line no-null/no-null\n\t\t\t\t\topts.topics.push(null);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// TODO: https://github.com/ethereum/web3.js/issues/344\n\t\t\t\t// TODO: deal properly with components\n\t\t\t\tif (Array.isArray(value)) {\n\t\t\t\t\topts.topics.push(value.map(v => encodeParameter(input.type, v)));\n\t\t\t\t} else if (input.type === 'string') {\n\t\t\t\t\topts.topics.push(keccak256(value as string));\n\t\t\t\t} else {\n\t\t\t\t\topts.topics.push(encodeParameter(input.type, value));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tif (!opts.topics.length) delete opts.topics;\n\n\tif (address) {\n\t\topts.address = address.toLowerCase();\n\t}\n\n\treturn opts;\n};\n\nexport const encodeMethodABI = (\n\tabi: AbiFunctionFragment | AbiConstructorFragment,\n\targs: unknown[],\n\tdeployData?: HexString,\n) => {\n\tconst inputLength = Array.isArray(abi.inputs) ? abi.inputs.length : 0;\n\tif (inputLength !== args.length) {\n\t\tthrow new Web3ContractError(\n\t\t\t`The number of arguments is not matching the methods required number. You need to pass ${inputLength} arguments.`,\n\t\t);\n\t}\n\n\tconst params = encodeParameters(Array.isArray(abi.inputs) ? abi.inputs : [], args).replace(\n\t\t'0x',\n\t\t'',\n\t);\n\n\tif (isAbiConstructorFragment(abi)) {\n\t\tif (!deployData)\n\t\t\tthrow new Web3ContractError(\n\t\t\t\t'The contract has no contract data option set. This is necessary to append the constructor parameters.',\n\t\t\t);\n\n\t\tif (!deployData.startsWith('0x')) {\n\t\t\treturn `0x${deployData}${params}`;\n\t\t}\n\n\t\treturn `${deployData}${params}`;\n\t}\n\n\treturn `${encodeFunctionSignature(abi)}${params}`;\n};\n\nexport const decodeMethodReturn = (abi: AbiFunctionFragment, returnValues?: HexString) => {\n\t// If it was constructor then we need to return contract address\n\tif (abi.type === 'constructor') {\n\t\treturn returnValues;\n\t}\n\n\tif (!returnValues) {\n\t\t// Using \"null\" value intentionally to match legacy behavior\n\t\t// eslint-disable-next-line no-null/no-null\n\t\treturn null;\n\t}\n\n\tconst value = returnValues.length >= 2 ? returnValues.slice(2) : returnValues;\n\tif (!abi.outputs) {\n\t\t// eslint-disable-next-line no-null/no-null\n\t\treturn null;\n\t}\n\tconst result = decodeParameters([...abi.outputs], value);\n\n\tif (result.__length__ === 1) {\n\t\treturn result[0];\n\t}\n\n\treturn result;\n};\n"]},"metadata":{},"sourceType":"script"}